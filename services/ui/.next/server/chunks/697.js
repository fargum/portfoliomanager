exports.id=697,exports.ids=[697],exports.modules={1450:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3642,23)),Promise.resolve().then(r.t.bind(r,7586,23)),Promise.resolve().then(r.t.bind(r,7838,23)),Promise.resolve().then(r.t.bind(r,8057,23)),Promise.resolve().then(r.t.bind(r,7741,23)),Promise.resolve().then(r.t.bind(r,3118,23))},3832:(e,t,r)=>{Promise.resolve().then(r.bind(r,8233)),Promise.resolve().then(r.bind(r,4760)),Promise.resolve().then(r.bind(r,222))},8233:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l});var o=r(7247),s=r(8069),a=r(6183),n=r(9126);let i=new s.Lx(n.XM);function l({children:e}){return o.jsx(a.rL,{instance:i,children:e})}},4760:(e,t,r)=>{"use strict";r.d(t,{ClientOnly:()=>a});var o=r(7247),s=r(8964);function a({children:e}){let[t,r]=(0,s.useState)(!1);return t?o.jsx(o.Fragment,{children:e}):o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-blue-600 border-t-transparent rounded-full"})})}},222:(e,t,r)=>{"use strict";r.d(t,{AuthContextProvider:()=>c,a:()=>h});var o=r(7247),s=r(8964),a=r(6183),n=r(9126),i=r(9287);let l=(0,s.createContext)(null);function c({children:e}){let{instance:t,accounts:r,inProgress:c}=(0,a.Fp)(),h=(0,a.kq)(),[d,u]=(0,s.useState)(null),[g,f]=(0,s.useState)(null),[m,y]=(0,s.useState)(!1),w=()=>{console.log("Clearing authentication state"),u(null),f(null),i.x.setAccessToken(null)},p=async()=>{try{await t.loginPopup(n.Qb)}catch(e){console.error("Login failed:",e)}};return o.jsx(l.Provider,{value:{isAuthenticated:h&&!!d,isAcquiringToken:m,accessToken:d,userInfo:g,login:p,logout:()=>{console.log("Starting logout process"),w(),t.logoutPopup({postLogoutRedirectUri:window.location.origin})}},children:e})}function h(){let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthContextProvider");return e}},9287:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});class o{constructor(e){this.accessToken=null,this.baseUrl=(e||"http://localhost:8080").replace(/\/$/,"")}setAccessToken(e){this.accessToken=e}getHeaders(){let e={Accept:"application/json","Content-Type":"application/json"};return this.accessToken?(e.Authorization=`Bearer ${this.accessToken}`,console.log("API request includes auth token (length:",this.accessToken.length,")")):console.warn("API request made WITHOUT auth token"),e}getStreamHeaders(){let e={Accept:"text/plain","Content-Type":"application/json"};return this.accessToken?(e.Authorization=`Bearer ${this.accessToken}`,console.log("Streaming API request includes auth token (length:",this.accessToken.length,")")):console.warn("Streaming API request made WITHOUT auth token"),e}async getHoldings(e){try{let t=this.formatDate(e),r=`${this.baseUrl}/api/holdings/date/${t}`,o=await fetch(r,{method:"GET",headers:this.getHeaders()});if(!o.ok){let e=await o.text();throw Error(`HTTP ${o.status}: ${e}`)}let s=(await o.json()).holdings||[];return{data:s,message:`Successfully retrieved ${s.length} holdings`}}catch(e){return console.error("Error fetching holdings:",e),{error:e instanceof Error?e.message:"Unknown error occurred"}}}async getHealthStatus(){try{let e=`${this.baseUrl}/health`;console.log(`Attempting to connect to API health endpoint: ${e}`),console.log(`Base URL configured as: ${this.baseUrl}`);let t=await fetch(e);if(!t.ok)throw Error(`Health check failed: ${t.status}`);let r=await t.text();return console.log(`API health check successful: ${r}`),{data:{status:r},message:"API is healthy"}}catch(e){return console.error("Health check failed:",e),console.error("Base URL was:",this.baseUrl),{error:e instanceof Error?e.message:"Health check failed"}}}formatDate(e){return new Date(e).toISOString().split("T")[0]}formatErrorMessage(e,t){return 401===e?"Please sign in to access the AI Assistant.":403===e?"You do not have permission to access this feature.":500===e&&t.includes("AuthorizationPolicy")?"Authentication required. Please sign in to continue.":e>=500?"The service is currently unavailable. Please try again later.":e>=400&&e<500?"There was a problem with your request. Please check your input and try again.":`HTTP ${e}: ${t}`}async testConnection(){return!(await this.getHealthStatus()).error}async sendChatQueryStream(e,t,r,o,s,a){try{let s=`${this.baseUrl}/api/ai/chat/stream`;console.log(`Sending streaming chat query to: ${s}`,{threadId:a});let n=await fetch(s,{method:"POST",headers:this.getStreamHeaders(),body:JSON.stringify({query:e,accountId:t,threadId:a})});if(!n.ok){let e=await n.text(),t=this.formatErrorMessage(n.status,e);throw Error(t)}let i=n.body?.getReader();if(!i)throw Error("ReadableStream not supported");let l=new TextDecoder;try{for(;;){let{done:e,value:t}=await i.read();if(e){o();break}let s=l.decode(t,{stream:!0});r(s)}}finally{i.releaseLock()}}catch(e){console.error("Error in streaming chat query:",e),s(e instanceof Error?e.message:"Unknown error occurred")}}async sendChatQuery(e,t,r){try{let o=`${this.baseUrl}/api/ai/chat/query`;console.log(`Sending chat query to: ${o}`,{threadId:r});let s=await fetch(o,{method:"POST",headers:this.getHeaders(),body:JSON.stringify({query:e,accountId:t,threadId:r})});if(!s.ok){let e=await s.text(),t=this.formatErrorMessage(s.status,e);throw Error(t)}return{data:await s.json(),message:"Chat query processed successfully"}}catch(e){return console.error("Error sending chat query:",e),{error:e instanceof Error?e.message:"Unknown error occurred"}}}async updateHoldingUnits(e,t){try{let r=`${this.baseUrl}/api/holdings/${e}/units`;console.log(`Updating holding units: ${r}`,{holdingId:e,units:t});let o=await fetch(r,{method:"PUT",headers:this.getHeaders(),body:JSON.stringify({units:t})});if(!o.ok){let e=await o.text(),t=this.formatErrorMessage(o.status,e);throw Error(t)}return{data:await o.json(),message:"Holding units updated successfully"}}catch(e){return console.error("Error updating holding units:",e),{error:e instanceof Error?e.message:"Failed to update holding units"}}}async deleteHolding(e){try{let t=`${this.baseUrl}/api/holdings/${e}`;console.log(`Deleting holding: ${t}`,{holdingId:e});let r=await fetch(t,{method:"DELETE",headers:this.getHeaders()});if(!r.ok){let e=await r.text(),t=this.formatErrorMessage(r.status,e);throw Error(t)}return{data:await r.json(),message:"Holding deleted successfully"}}catch(e){return console.error("Error deleting holding:",e),{error:e instanceof Error?e.message:"Failed to delete holding"}}}async checkInstrument(e){try{let t=`${this.baseUrl}/api/instruments/check/${encodeURIComponent(e.trim().toUpperCase())}`;console.log(`Checking instrument: ${t}`,{ticker:e});let r=await fetch(t,{method:"GET",headers:this.getHeaders()});if(r.ok)return{data:await r.json(),error:void 0};{let e=await r.json().catch(()=>({detail:"Unknown error"}));return{data:void 0,error:e.detail||`Failed to check instrument: ${r.status}`}}}catch(e){return console.error("Error checking instrument:",e),{data:void 0,error:e instanceof Error?e.message:"Unknown error occurred"}}}async addHolding(e,t){try{let r=`${this.baseUrl}/api/holdings/portfolio/${e}`;console.log(`Adding new holding: ${r}`,{portfolioId:e,request:t});let o=await fetch(r,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(t)});if(!o.ok){let e=await o.text(),t=this.formatErrorMessage(o.status,e);throw Error(t)}return{data:await o.json(),message:"Holding added successfully"}}catch(e){return console.error("Error adding holding:",e),{error:e instanceof Error?e.message:"Failed to add holding"}}}async getAvailableAiTools(){try{let e=`${this.baseUrl}/api/ai/chat/tools`;console.log(`Fetching AI tools from: ${e}`);let t=await fetch(e,{method:"GET",headers:this.getHeaders()});if(!t.ok){let e=await t.text();throw Error(`HTTP ${t.status}: ${e}`)}let r=await t.json();return{data:r,message:`Successfully retrieved ${r.length} AI tools`}}catch(e){return console.error("Error fetching AI tools:",e),{error:e instanceof Error?e.message:"Unknown error occurred"}}}async getChatHealthStatus(){try{let e=`${this.baseUrl}/api/ai/chat/health`;console.log(`Checking AI chat health: ${e}`);let t=await fetch(e,{method:"GET",headers:this.getHeaders()});if(!t.ok)throw Error(`AI chat health check failed: ${t.status}`);return{data:await t.json(),message:"AI chat service is healthy"}}catch(e){return console.error("AI chat health check failed:",e),{error:e instanceof Error?e.message:"AI chat health check failed"}}}}let s=new o},9126:(e,t,r)=>{"use strict";r.d(t,{Qb:()=>a,XM:()=>s});var o=r(4536);let s={auth:{clientId:(()=>{let e="4884728d-b70f-4695-a359-a291ddfa3574";if(!e)throw Error("NEXT_PUBLIC_AZURE_CLIENT_ID environment variable is required. Please set it in your .env.local file.");return e})(),authority:`https://login.microsoftonline.com/${(()=>{let e="1f6e5d9e-5f2d-44ae-a729-05e20ecd4f75";if(!e)throw Error("NEXT_PUBLIC_AZURE_TENANT_ID environment variable is required. Please set it in your .env.local file.");return e})()}`,redirectUri:"http://localhost:3000",postLogoutRedirectUri:"http://localhost:3000"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,r)=>{if(!r)switch(e){case o.i.Error:console.error(t);return;case o.i.Info:console.info(t);return;case o.i.Verbose:console.debug(t);return;case o.i.Warning:console.warn(t);return}}}}},a={scopes:[`api://${(()=>{let e="78661cad-e894-4462-9d21-5c7d10c56a3e";if(!e)throw Error("NEXT_PUBLIC_AZURE_API_CLIENT_ID environment variable is required. Please set it in your .env.local file.");return e})()}/Portfolio.ReadWrite`],prompt:"select_account"}},5750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>h});var o=r(2051),s=r(7233),a=r.n(s),n=r(5347);let i=(0,n.createProxy)(String.raw`C:\Users\neilb\projects\PortfolioManager\services\ui\src\components\AuthProvider.tsx#AuthProvider`),l=(0,n.createProxy)(String.raw`C:\Users\neilb\projects\PortfolioManager\services\ui\src\contexts\AuthContext.tsx#AuthContextProvider`);(0,n.createProxy)(String.raw`C:\Users\neilb\projects\PortfolioManager\services\ui\src\contexts\AuthContext.tsx#useAuth`);let c=(0,n.createProxy)(String.raw`C:\Users\neilb\projects\PortfolioManager\services\ui\src\components\ClientOnly.tsx#ClientOnly`);r(5023);let h={title:"Portfolio Manager",description:"Professional portfolio management and holdings tracking"};function d({children:e}){return o.jsx("html",{lang:"en",children:o.jsx("body",{className:`${a().className} bg-financial-gray-50 min-h-screen`,children:o.jsx(c,{children:o.jsx(i,{children:o.jsx(l,{children:o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-financial-gray-50 to-financial-gray-100",children:e})})})})})})}},5023:()=>{}};